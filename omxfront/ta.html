<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>
        </title>
        <style type='text/css'>
            body{
                 height:100%;
                 width:100%;
                 margin:0;			
                 overflow:hidden;
                 background:#000;
            }
			   div{
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                -icab-user-select: none;
                -o-user-select: none;
                user-select: none;			   
			   }
            .desktopbigclass{
                 float:left;
                 width:320px;
            	  height:420px;
                 
            }
            .playerline{
                 height:48px;
                 width:320px;           
                 border-top: 2px #0000ff solid;
            }
            .playerlist{
                 height:370px;
                 width:320px;           
                 overflow-y:scroll;
                 overflow-x:hidden;
            }
            .playerelement{
                 height:16px;
                 width:320px;
                 padding-top:4px;           
                 color:#0000ff;
                 font-weight:bold;
                 font-size:14px;
                 overflow:hidden;
                 cursor:pointer;
            }
            .playerbutton{
                 float:left;
                 margin-top:10px;
                 margin-left:11px;
                 height:30px;
                 width:50px;
                 background:#0000ff;
                 color:#000;
                 text-align:center;
                 font-size: 24px;
                 font-weight:bold;
                 cursor:pointer;
            }
        </style>
    </head>
    <body>
        <div  class="desktopbigclass" id="desktopbigclass">
        <div  class="playerbox" id="playerbox">
            <div  class="playerlist" id="playerlist">

            </div>
            <div  class="playerline">
                 <div  class="playerbutton" id="playerbuttonfb" onclick="playerfb()"><<</div>
                 <div  class="playerbutton" id="playerbuttonp" onclick="playerplay()">></div>
                 <div  class="playerbutton" id="playerbuttons" onclick="playerstop()">#</div>
                 <div  class="playerbutton" id="playerbuttonff" onclick="playerff()">>></div>
                 <div  class="playerbutton">S</div>
            </div>
            </div>
        </div>
        <script type='text/javascript'>
// mobil extra 


            if(navigator.userAgent.match(/Android/i)){
                window.scrollTo(0,1);
            }            
            if(navigator.userAgent.match(/iPhone/i)){
                window.scrollTo(0,1);
            }
            
//this.touchstart = function (ev) { tool.mousedown(ev); }, this.touchmove = function (ev) { tool.mousemove(ev); } 
//this.touchend = function (ev) { tool.mouseup(ev); }

                var singer = {
                    singed : 0,
                    playlist : new Array(),
                    playing : 0,
                }
                singer.playlist[0] = "fdsdf";
                function singerpush(pushed) {
                    var cuid = document.getElementById("playerelement"+pushed.toString());
                    if (singer.singed.toString() === pushed.toString()){
                        cuid.style.color = "#0000ff";
                        cuid.style.background = "#000";
                        singer.singed = 0;
                    }else {
                        if (parseInt(singer.singed) !== 0){
                            var siid = document.getElementById("playerelement"+singer.singed.toString());
                            siid.style.color = "#0000ff";
                            siid.style.background = "#000";
                        }
                        cuid.style.color = "#000";
                        cuid.style.background = "#0000ff";
                        singer.singed = parseInt(pushed);
                    }
                
                }
                
                
                var player = {
                    playing : 0,
                
                
                }
                function playerplay() {
                    if (parseInt(singer.singed)!==0) {
                        
                        var xhReq = new XMLHttpRequest();
                        if (player.playing === 0){
                            xhReq.open("POST", "/play/"+singer.playlist[parseInt(singer.singed)].path, false);
                        } else {
                            xhReq.open("POST", "/pause/", false);
                        }
                        xhReq.onreadystatechange  = function(){
                            if (xhReq.readyState == 4){
                                var jsonObj = JSON.parse(xhReq.responseText);
                                for (i=0;jsonObj.length>i;i++) {
                                     playerinput(jsonObj[i]);
                                }
                                jsonObj.name;
                            }
                        }
                        xhReq.send(null);     
                    }
                }

                function playerstop() {
                    if (parseInt(singer.singed)!==0) {
                        var xhReq = new XMLHttpRequest();
                        xhReq.open("POST", "/stop/", false);
                        xhReq.onreadystatechange  = function(){
                            if (xhReq.readyState == 4){
                                var jsonObj = JSON.parse(xhReq.responseText);
                                for (i=0;jsonObj.length>i;i++) {
                                     playerinput(jsonObj[i]);
                                }
                                jsonObj.name;
                            }
                        }
                        xhReq.send(null);
                    }
                }
                function playerff() {
                    if (parseInt(singer.singed)!==0) {
                        var xhReq = new XMLHttpRequest();
                        outda = "kola=fasza";
                        xhReq.open("POST", "/seek+30", false);
                        xhReq.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                        xhReq.setRequestHeader("Content-length", outda.length);
                        xhReq.setRequestHeader("Connection", "close");
                        xhReq.send(outda);
                    }
                }
                function playerfb() {
                    if (parseInt(singer.singed)!==0) {
                        var xhReq = new XMLHttpRequest();
                        xhReq.open("POST", "/seek-30", false);
                        xhReq.send(null);
                    }
                }                
                function playerlistmake() {
	                  var outhtml="";
	                  for (i=1; singer.playlist.length > i ; i++ ) {
	                       outhtml+="<div  class='playerelement' id='playerelement"+i.toString()+"' onclick='singerpush("+i.toString()+")'>"+singer.playlist[i].ame+"</div>";
	                  }
	                  document.getElementById("playerlist").innerHTML=outhtml; 
                }
                
                
                function playerinput(jsonom) {
	                 if (jsonom.modul==="interface"){
	                     if (jsonom.interfac==="playing"){
	                         document.getElementById("playerbuttonp").innerHTML=" ||";
	                         player.playing = 1;
	                     }else if (jsonom.interfac==="pause" || jsonom.interfac==="stop"){
	                         document.getElementById("playerbuttonp").innerHTML=">";
	                         player.playing = 0;
	                     }
	                 }
                }                
                
                
            var jsonbfit = {
            	 originalw : 2400,
            	 originalh : 3200,
            	 flip : {
            	 	  onoff : 0,
            	     verticalw : 1080,
            	     verticalh : 1920,
            	     verticalhtml : "<div class='desktopvertical'></div>",
            	     horizontalw : 1920,
            	     horizontalh : 1080,
            	     horizontalhtml : "<div class='desktophorizontal'></div>",
            	 },           	 
            	 interval : "",
            	 marginleft : 0,
            	 margintop : 0,
            	 currentw : 0,
            	 currenth : 0,
            	 aranyw : 0,
            	 aranyh : 0,
            	 oldw : 0,
            	 oldh : 0,
            	 scale : 1,
            	 rescale : 0,
                	
            }  

            document.onkeydown = function(e) {
                var k = e.keyCode;
                if ((k >= 37 && k <= 40) || (k >= 33 && k <= 34)) {
                    return false;
                }
            }
        
            function jsonbfitflip() {
                if (jsonbfit.currentw > jsonbfit.currenth ){
                    document.getElementById('desktopbigclass').innerHTML=jsonbfit.flip.horizontalhtml;
                    jsonbfit.originalw = jsonbfit.flip.horizontalw;
                    jsonbfit.originalh = jsonbfit.flip.horizontalh;
                    document.getElementById('desktopbigclass').style.width = jsonbfit.originalw.toString()+"px";
                    document.getElementById('desktopbigclass').style.height = jsonbfit.originalh.toString()+"px"; 
                }	else {
                    document.getElementById('desktopbigclass').innerHTML=jsonbfit.flip.verticalhtml;
                    jsonbfit.originalw = jsonbfit.flip.verticalw;
                    jsonbfit.originalh = jsonbfit.flip.verticalh;
                    document.getElementById('desktopbigclass').style.width = jsonbfit.originalw.toString()+"px";
                    document.getElementById('desktopbigclass').style.height = jsonbfit.originalh.toString()+"px"; 
                }
            }        
        
            function jsonbfitscale(){
                jsonbfit.aranyw=jsonbfit.currentw/jsonbfit.originalw;
                jsonbfit.aranyh=jsonbfit.currenth/jsonbfit.originalh;
                if(jsonbfit.aranyw > jsonbfit.aranyh){
                    if(1>jsonbfit.aranyh){
                    	   var testmargoa = jsonbfit.currentw-(jsonbfit.aranyh*jsonbfit.originalw);
                    	   var testmargob = (testmargoa-2)/2;
                    	   var testmargotext = testmargob.toString()+"px";
                        var fitscalebale = "scale("+jsonbfit.aranyh.toString()+")";
                        var testmargoleft = testmargotext;
                        var testmargotop = "0";
                        jsonbfit.margintop = 0;
                        jsonbfit.marginleft = testmargob;
                        jsonbfit.scale = jsonbfit.aranyh;
                    }
                }else{
                    if(1>jsonbfit.aranyw){
                    	   var testmargoa = jsonbfit.currenth-(jsonbfit.aranyw*jsonbfit.originalh);
                    	   var testmargob = (testmargoa-2)/2;
                    	   var testmargotext = testmargob.toString()+"px";
                        var fitscalebale = "scale("+jsonbfit.aranyw.toString()+")";
                        var testmargoleft = "0";
                        var testmargotop = testmargotext;
                        jsonbfit.margintop = testmargob;
                        jsonbfit.marginleft = 0;
                        jsonbfit.scale = jsonbfit.aranyw;
                    }
                }
                document.getElementById('desktopbigclass').style.webkitTransform=fitscalebale;
                document.getElementById('desktopbigclass').style.webkitTransformOrigin="0 0";
                document.getElementById('desktopbigclass').style.transform=fitscalebale;
                document.getElementById('desktopbigclass').style.transformOrigin="0 0";
                document.getElementById('desktopbigclass').style.marginLeft=testmargoleft;
                document.getElementById('desktopbigclass').style.marginTop=testmargotop;

            }
            
            function jsonbfitinterval(){
                if (document.body && document.body.offsetWidth) {
                    jsonbfit.currentw = document.body.offsetWidth;
                    jsonbfit.currenth = document.body.offsetHeight;
                }
                if (document.compatMode=='CSS1Compat' &&
                    document.documentElement &&
                    document.documentElement.offsetWidth ) {
                    jsonbfit.currentw = document.documentElement.offsetWidth;
                    jsonbfit.currenth = document.documentElement.offsetHeight;
                }
                if (window.innerWidth && window.innerHeight) {
                    jsonbfit.currentw = window.innerWidth;
                    jsonbfit.currenth = window.innerHeight;
                }
                if (jsonbfit.flip.onoff == 1) {
                	  jsonbfitflip();
                
                }
                if(jsonbfit.currentw !=jsonbfit.oldw  || jsonbfit.currenth!=jsonbfit.oldh){
                    jsonbfitscale();
                    jsonbfit.oldw = jsonbfit.currentw;
                    jsonbfit.oldh = jsonbfit.currenth;
                }
               
            }
            
            function jsonbfitintervalstart(){
          //      clearInterval(jsonbdesktopinterval);
			       jsonbfit.interval = setInterval("jsonbfitinterval()", 1000);
            }
            
//            jsonbfitinterval();
//            jsonbfitintervalstart();  
            
        
        

        
            var jsonbnet = {
            
            }
            